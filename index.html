<!DOCTYPE html>
<html>
    <head>
        <title>My To do list</title>
    </head>
    <body>
        <input id="todo-title" type="text" />
        <input id="date-picker" type="date" />
        <button onclick="addTodo()">Add Todo</button>

        <div id="todo-list"></div>
    <script>
        let todos =[{
            title: "study javascript",
            dueDate: "2023-02-02",
            id: "id1"
        },{
            title: "pending linked list lecture",
            dueDate: "2023-03-03",
            id: "id2"
        },{
            title: "study for msts",
            dueDate: "2023-04-03",
            id: "id3"
        }];


        render();

        function deletetodo(event) {
            const deleteButton = event.target;
            const idToDelete = deleteButton.id;

            //creates a copy array so we re-assign it to our original hence todos = todos.filter 
            todos = todos.filter(function (todo) {
                //if id of element matches the id in array then return false

                if(todo.id === idToDelete){
                    return false;
                } else {
                    return true;
                }
            });
            render();
        }

        function render() {
        //reset the previous arraylist
        document.getElementById("todo-list").innerHTML= '';


        todos.forEach(function (todo){
            const element = document.createElement("div");
            element.innerText = todo.title + " " + todo.dueDate;

            const deleteButton = document.createElement("button");
            deleteButton.innerText = "delete";
            deleteButton.style = "margin-left: 12px;";

            deleteButton.onclick = deletetodo;
            deleteButton.id = todo.id;
            element.appendChild(deleteButton)

            document.getElementById("todo-list").appendChild(element);
        });
        }

        function addTodo() {
            const textBox = document.getElementById("todo-title");
            const title = textBox.value;

            const datePicker = document.getElementById("date-picker");
            const dueDate = datePicker.value;

            const id = new Date().getTime();
            todos.push({
                title: title,
                dueDate: dueDate,
                id: toString(id) 
            });

            render(); 
        };
    </script>
    </body>
</html>